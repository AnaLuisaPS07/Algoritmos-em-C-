#include <stdio.h>

#define MIN_ANO 2000
#define MAX_ANO 2024
#define MIN_MES 1
#define MAX_MES 12
#define MIN_TEMP -70
#define MAX_TEMP 60

int dias_no_mes(int mes, int ano) {
    // Função para determinar o número de dias no mês
    if (mes == 2) {
        // Verifica se é ano bissexto
        if ((ano % 4 == 0 && ano % 100 != 0) || (ano % 400 == 0)) {
            return 29;
        } else {
            return 28;
        }
    }
    // Meses com 30 dias
    if (mes == 4 || mes == 6 || mes == 9 || mes == 11) {
        return 30;
    }
    // Meses com 31 dias
    return 31;
}

int main() {
    int ano, mes;
    int dias, i;
    int temperaturas[31]; // Para armazenar as temperaturas
    int max_temp = MIN_TEMP - 1;
    int total_temp = 0;
    int num_max_temp_dias = 0;
    int max_temp_dias[31];

    // Entrada e validação do ano
    printf("Entre com o ano da medicao das temperaturas: ");
    scanf("%d", &ano);
    printf("\n");
    while (ano < MIN_ANO || ano > MAX_ANO) {
        printf("Ano deve ser maior ou igual a %d e menor ou igual a %d\n", MIN_ANO, MAX_ANO);
        printf("\n");
        printf("Entre com o ano da medicao das temperaturas: ");
        scanf("%d", &ano);
        printf("\n");
    }

    // Entrada e validação do mês
    printf("Entre com o mes da medicao das temperaturas: ");
    scanf("%d", &mes);
    printf("\n");
    while (mes < MIN_MES || mes > MAX_MES) {
        printf("Mes deve ser maior do que zero e menor ou igual a %d\n", MAX_MES);
        printf("\n");
        printf("Entre com o mes da medicao das temperaturas: ");
        scanf("%d", &mes);
        printf("\n");
    }

    // Determina o número de dias no mês
    dias = dias_no_mes(mes, ano);

    printf("Temperaturas medidas (em graus Celsius):\n");
    printf("\n");

    // Entrada e validação das temperaturas
    for (i = 0; i < dias; i++) {
        printf("Dia %d: ", i + 1);
        scanf("%d", &temperaturas[i]);
        printf("\n");
        while (temperaturas[i] < MIN_TEMP || temperaturas[i] > MAX_TEMP) {
            printf("Temperatura deve ser maior ou igual a %d graus e menor ou igual a %d graus\n", -100, 100);
            printf("Dia %d: ", i + 1);
            scanf("%d", &temperaturas[i]);
        }

        // Calcula a maior temperatura e os dias em que ela ocorre
        if (temperaturas[i] > max_temp) {
            max_temp = temperaturas[i];
            num_max_temp_dias = 0;
            max_temp_dias[num_max_temp_dias++] = i + 1;
        } else if (temperaturas[i] == max_temp) {
            max_temp_dias[num_max_temp_dias++] = i + 1;
        }

        total_temp += temperaturas[i];
    }

    // Calcula a temperatura máxima média
    double media_temp = (double)total_temp / dias;

    // Exibe os resultados
    printf("A maior temperatura maxima do mes foi de %d e aconteceu nos dias: ", max_temp);
    for (i = 0; i < num_max_temp_dias; i++) {
        if (i > 0) printf(" ");
        printf("%d", max_temp_dias[i]);
    }
    printf("\n");

    printf("A temperatura maxima media no mes foi de: %.1f graus Celsius\n", media_temp);

    return 0;
}
