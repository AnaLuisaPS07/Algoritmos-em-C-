#include <stdio.h>
#include <string.h>

int main() {
    char saldoStr[50], saqueStr[50];  // Strings para saldo e saque
    float saldo;
    int saque, temp_saque;
    int notas[6] = {100, 50, 20, 10, 5, 2};  // Tipos de cédulas
    int qtdNotasMin[6] = {0};  // Quantidade de cédulas para opção mínima
    int qtdNotasMax[6] = {0};  // Quantidade de cédulas para opção máxima
    int i;

    // Entrada do saldo como string
    printf("Entre com o saldo da conta a ser sacada (em reais): ");
    scanf("%s", saldoStr);
    printf("\n");

    // Substituir a vírgula por ponto, se houver
    for (i = 0; i < strlen(saldoStr); i++) {
        if (saldoStr[i] == ',') {
            saldoStr[i] = '.';
        }
    }

    // Converter a string corrigida para float
    sscanf(saldoStr, "%f", &saldo);

    // Validação e entrada do valor do saque como string
    do {
        printf("Entre com o valor do saque (em reais): ");
        scanf("%s", saqueStr);

        // Substituir a vírgula por ponto, se houver
        for (i = 0; i < strlen(saqueStr); i++) {
            if (saqueStr[i] == ',') {
                saqueStr[i] = '.';
            }
        }

        // Converter a string corrigida para inteiro
        sscanf(saqueStr, "%d", &saque); // Aqui corrigimos para inteiro

        printf("\n");

        if (saque <= 0) {
            printf("Valor do saque invalido\n");
            printf("\n");
        } else if (saque > (int)saldo) {
            printf("Saldo insuficiente para valor desejado\n");
            printf("\n");
        } else if (saque % 10 == 1 || saque % 10 == 3) {
            // Verifica se o valor termina com 1 ou 3, que são incompatíveis com as cédulas disponíveis
            printf("Valor do saque incompativel com notas disponiveis\n");
            printf("\n");
        }
    } while (saque <= 0 || saque > (int)saldo || saque % 10 == 1 || saque % 10 == 3);

    // Cálculo do menor número de cédulas
    temp_saque = saque;
    for (i = 0; i < 6; i++) {
        qtdNotasMin[i] = temp_saque / notas[i];
        temp_saque %= notas[i];
    }

    // Cálculo da maior quantidade de cédulas, priorizando cédulas de 2 reais
    temp_saque = saque;

    // Primeiro, usaremos a maior quantidade possível de cédulas de 2 reais
    qtdNotasMax[5] = temp_saque / 2;  // Cálculo das cédulas de 2 reais
    temp_saque %= 2;

    // Se o valor restante for 1 ou 3, ajustamos o uso de cédulas de 2 reais e introduzimos cédulas de 5 reais
    if (temp_saque != 0) {
        qtdNotasMax[5] -= 2;  // Retira duas cédulas de R$ 2
        qtdNotasMax[4] = 1;   // Adiciona uma cédula de R$ 5
    }

    // Atualizando saldo
    saldo -= saque;

    // Resultados
    printf("\nRESULTADOS\n");
    printf("\n\n");
    printf("Valor atualizado do saldo (em reais): %.2f\n", saldo);
    printf("\n");

    // Opção 1: Menor quantidade possível de cédulas
    printf("Opcao de saque 1 (menor quantidade possivel de cedulas)\n");
    printf("\n");
    for (i = 0; i < 6; i++) {
        if (qtdNotasMin[i] > 0) {
            printf("Cedulas de %d reais: %d\n", notas[i], qtdNotasMin[i]);
        }
    }

    // Opção 2: Maior quantidade possível de cédulas
    printf("\nOpcao de saque 2 (maior quantidade possivel de cedulas)\n");
    printf("\n");

    // Inverte a ordem de impressão para priorizar as cédulas de 2 reais
    for (i = 5; i >= 4; i--) {  // Primeiro imprime as notas de 2 reais, depois de 5 reais
        if (qtdNotasMax[i] > 0) {
            printf("Cedulas de %d reais: %d\n", notas[i], qtdNotasMax[i]);
            printf("\n");
        }
    }

    return 0;
}
