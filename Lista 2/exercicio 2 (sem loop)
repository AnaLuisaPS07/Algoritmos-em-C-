#include <stdio.h>

#define MAX_VENDEDORES 10
#define MAX_DIAS 31

int main() {
    // Variáveis
    int mes, num_vendedores, nota_fiscal, dia, codigo_vendedor, total_vendas = 0;
    int vendas_por_dia[MAX_DIAS] = {0}, vendas_por_vendedor[MAX_VENDEDORES] = {0};
    float valor_venda, total_vendas_mes = 0.0, total_comissao_mes = 0.0;
    float total_vendedor[MAX_VENDEDORES] = {0.0}, comissao_vendedor[MAX_VENDEDORES] = {0.0};
    float total_vendas_por_dia[MAX_DIAS] = {0.0};

    // Pedir o mês
    do {
        printf("Entre com o mês em que as vendas foram realizadas: ");
        scanf("%d", &mes);
        if (mes < 1 || mes > 12) {
            printf("Mês deve ser maior ou igual a 1 e menor ou igual a 12\n");
        }
    } while (mes < 1 || mes > 12);

    // Pedir o número de vendedores
    do {
        printf("Entre com o número de vendedores que trabalharam no mês: ");
        scanf("%d", &num_vendedores);
        if (num_vendedores < 1 || num_vendedores > MAX_VENDEDORES) {
            printf("Número de vendedores deve ser maior do que zero e menor ou igual a %d\n", MAX_VENDEDORES);
        }
    } while (num_vendedores < 1 || num_vendedores > MAX_VENDEDORES);

    // Entrada das vendas
    printf("Entre com as vendas. Para cada venda realizada no mes informar o numero da nota fiscal que a identifica,\n");
    printf("o codigo do vendedor responsavel, o dia do mes em que foi feita e o valor da venda em reais.\n");
    printf("Quando desejar finalizar a entrada de dados, digite o numero zero para a nota fiscal.\n");

    do {
        printf("Venda: ");
        scanf("%d", &nota_fiscal);

        // Encerrar se a nota fiscal for 0
        if (nota_fiscal == 0) {
            break;
        }

        // Ler o código do vendedor, dia e valor da venda
        scanf("%d %d %f", &codigo_vendedor, &dia, &valor_venda);

        // Validação do código do vendedor
        if (codigo_vendedor < 1 || codigo_vendedor > num_vendedores) {
            printf("Código do vendedor inválido! Deve ser entre 1 e %d\n", num_vendedores);
            continue; // Ignora a venda se o código do vendedor estiver incorreto
        }

        // Validação do dia da venda
        if (dia < 1 || (mes == 2 && dia > 28) || (mes == 4 || mes == 6 || mes == 9 || mes == 11 && dia > 30) || dia > 31) {
            printf("Dia da venda inválido para o mês %d\n", mes);
            continue; // Ignora a venda se o dia estiver incorreto
        }

        // Validação do valor da venda
        if (valor_venda <= 0) {
            printf("Valor da venda deve ser maior que zero\n");
            continue; // Ignora a venda se o valor estiver incorreto
        }

        // Atualizar os totais
        total_vendas_mes += valor_venda;
        vendas_por_dia[dia]++;
        total_vendas_por_dia[dia] += valor_venda;

        vendas_por_vendedor[codigo_vendedor]++;
        total_vendedor[codigo_vendedor] += valor_venda;

        total_vendas++;
    } while (nota_fiscal != 0);

    // Calcular comissão para cada vendedor
    for (int i = 1; i <= num_vendedores; i++) {
        if (total_vendedor[i] <= 2000) {
            comissao_vendedor[i] = total_vendedor[i] * 0.05;
        } else if (total_vendedor[i] < 5000) {
            comissao_vendedor[i] = total_vendedor[i] * 0.07;
        } else {
            comissao_vendedor[i] = total_vendedor[i] * 0.10;
        }
        total_comissao_mes += comissao_vendedor[i];
    }

    // Exibir resumo por vendedor
    printf("\nRESUMO DE VENDAS POR VENDEDOR\n");
    for (int i = 1; i <= num_vendedores; i++) {
        if (vendas_por_vendedor[i] > 0) {
            printf("Vendedor %d\n", i);
            printf("Valor total vendido: %.2f reais\n", total_vendedor[i]);
            printf("Valor da comissão: %.2f reais\n\n", comissao_vendedor[i]);
        }
    }

    // Exibir resumo por dia
    printf("\nRESUMO DE VENDAS POR DIA\n");
    for (int i = 1; i <= MAX_DIAS; i++) {
        if (vendas_por_dia[i] > 0) {
            printf("Dia %d: %d venda(s) com valor total de %.2f reais\n", i, vendas_por_dia[i], total_vendas_por_dia[i]);
        }
    }

    // Exibir resumo do mês
    printf("\nRESUMO DE VENDAS NO MÊS\n");
    printf("Quantidade de vendas: %d\n", total_vendas);
    printf("Valor total vendido: %.2f reais\n", total_vendas_mes);
    printf("Valor total de comissões pagas: %.2f reais\n", total_comissao_mes);

    return 0;
}
