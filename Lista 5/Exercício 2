//cheio de erro


#include <stdio.h>
#include <stdlib.h>

// Definição do nó da lista encadeada
typedef struct No {
    int senha;
    struct No* prox;
} No;

// Função para criar um novo nó
No* criarNo(int senha) {
    No* novo = (No*)malloc(sizeof(No));
    if (novo == NULL) {
        printf("Erro ao alocar memória!\n");
        exit(1);
    }
    novo->senha = senha;
    novo->prox = NULL;
    return novo;
}

// Função para inserir na fila (no final da lista)
void inserir(No** cabeca, int senha) {
    No* novo = criarNo(senha);
    if (*cabeca == NULL) {
        *cabeca = novo;
    } else {
        No* temp = *cabeca;
        while (temp->prox != NULL) {
            temp = temp->prox;
        }
        temp->prox = novo;
    }
}

// Função para remover da fila (da frente da lista)
void remover(No** cabeca, int senha) {
    if (*cabeca == NULL) {
        printf("SENHA NAO EXISTE NA FILA\n");
        return;
    }

    No* temp = *cabeca;
    No* ant = NULL;

    // Caso especial se a senha estiver na cabeça da lista
    if (temp != NULL && temp->senha == senha) {
        *cabeca = temp->prox;
        free(temp);
        return;
    }

    // Procurando a senha na lista
    while (temp != NULL && temp->senha != senha) {
        ant = temp;
        temp = temp->prox;
    }

    if (temp == NULL) {
        printf("SENHA NAO EXISTE NA FILA\n");
        return;
    }

    // Removendo o nó
    ant->prox = temp->prox;
    free(temp);
}

// Função para verificar se a senha já existe na fila
int existe(No* cabeca, int senha) {
    No* temp = cabeca;
    while (temp != NULL) {
        if (temp->senha == senha) {
            return 1; // Senha encontrada
        }
        temp = temp->prox;
    }
    return 0; // Senha não encontrada
}

// Função para imprimir a configuração final da fila
void imprimir(No* cabeca) {
    if (cabeca == NULL) {
        printf("VAZIA\n");
    } else {
        No* temp = cabeca;
        while (temp != NULL) {
            printf("%d", temp->senha);
            if (temp->prox != NULL) {
                printf(" ");
            }
            temp = temp->prox;
        }
        printf("\n");
    }
}

// Função principal
int main() {
    No* fila = NULL;
    int operacao, senha;

    while (1) {
        char comando[10];
        printf("Movimentacao durante a formacao da fila:\n");
        scanf("%s", comando);

        // Se for "FIM", termina o processo
        if (comando[0] == 'F') {
            break;
        }

        // Lê a operação e a senha
        scanf("%d %d", &operacao, &senha);

        // A operação de entrada
        if (operacao == 1) {
            if (existe(fila, senha)) {
                printf("SENHA JA EXISTE NA FILA\n");
            } else {
                inserir(&fila, senha);
            }
        }
        // A operação de saída
        else if (operacao == 2) {
            remover(&fila, senha);
        }
    }

    // Exibe a configuração final da fila
    printf("Configuracao final apos o periodo de formacao da fila: ");
    imprimir(fila);

    return 0;
}
